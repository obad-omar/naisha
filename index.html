<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Ø§Ø·Ù„Ø¨ Ø§Ù„Ø¢Ù† | Ù†ÙŠØ´Ø§</title>

  <style>
    /* =========================
      Ù‡ÙˆÙŠØ© Ù†ÙŠØ´Ø§
      Ø£Ø®Ø¶Ø± Ø²ÙŠØªÙˆÙ†ÙŠ: #4F6F52
      Ø¨ÙŠØ¬ ÙƒØ±ÙŠÙ…ÙŠ:  #F3ECDC
      Ø£Ø³ÙˆØ¯ Ù…Ø·ÙÙŠ:  #2B2B2B
    ========================== */
    :root{
      --green:#4F6F52;
      --beige:#F3ECDC;
      --ink:#2B2B2B;
      --muted:#6b6b6b;

      --card:#ffffff;
      --stroke: rgba(0,0,0,.08);
      --shadow: 0 14px 28px rgba(0,0,0,.10);

      --r: 18px;
      --r2: 16px;
    }

    *{ box-sizing:border-box; }
    body{
      margin:0;
      font-family: system-ui, -apple-system, "Segoe UI", Tahoma, Arial, sans-serif;
      background: linear-gradient(180deg, var(--beige), #fff);
      color: var(--ink);
    }
    a{ color:inherit; text-decoration:none; }

    /* ===== Ù‡ÙŠØ¯Ø± Ø¹Ù„ÙˆÙŠ ===== */
    header{
      position: sticky;
      top: 0;
      z-index: 30;
      background: rgba(243,236,220,.92);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid rgba(0,0,0,.06);
      padding: 12px 14px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 12px;
    }
    .brand{
      display:flex;
      align-items:center;
      gap:10px;
      font-weight: 900;
      color: var(--green);
      font-size: 16px;
    }
    .mark{
      width:42px;height:42px;
      border-radius: 14px;
      background: var(--green);
      color: var(--beige);
      display:grid;
      place-items:center;
      font-weight: 900;
      font-size: 20px;
      box-shadow: 0 10px 22px rgba(79,111,82,.20);
    }
    .topBtns{
      display:flex;
      gap:10px;
      align-items:center;
    }
    .btn{
      border:1px solid rgba(0,0,0,.10);
      background:#fff;
      border-radius: 14px;
      padding:10px 12px;
      font-weight: 900;
      cursor:pointer;
      display:inline-flex;
      align-items:center;
      gap:8px;
      user-select:none;
    }
    .btn.primary{
      background: var(--green);
      color:#fff;
      border-color: transparent;
    }

    /* ===== ØªØ®Ø·ÙŠØ· Ø§Ù„ØµÙØ­Ø© ===== */
    .wrap{
      max-width: 980px;
      margin: 0 auto;
      padding: 14px;
      padding-bottom: 92px; /* Ù…Ø³Ø§Ø­Ø© Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø³Ù„Ø© Ø§Ù„Ø³ÙÙ„ÙŠ */
      display:grid;
      gap: 14px;
    }

    /* ===== Ø¹Ø±ÙˆØ¶ Ù†ÙŠØ´Ø§ ===== */
    .offersBox{
      background: linear-gradient(135deg, rgba(79,111,82,.92), rgba(79,111,82,.78));
      border: 1px solid rgba(0,0,0,.06);
      border-radius: 22px;
      box-shadow: 0 18px 38px rgba(0,0,0,.12);
      color: var(--beige);
      overflow:hidden;
    }
    .offersHead{
      padding: 14px 14px 10px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
    }
    .offersHead strong{
      font-size: 16px;
      font-weight: 1000;
    }
    .offersHead span{
      font-size: 12px;
      opacity:.9;
      font-weight: 900;
    }
    .offersRow{
      display:flex;
      gap:10px;
      padding: 0 14px 14px;
      overflow:auto;
      scroll-snap-type: x mandatory;
      -webkit-overflow-scrolling: touch;
    }
    .offerCard{
      min-width: 240px;
      scroll-snap-align: start;
      background: rgba(243,236,220,.12);
      border: 1px solid rgba(243,236,220,.22);
      border-radius: 18px;
      padding: 12px;
      display:grid;
      gap:6px;
    }
    .offerCard .t{
      font-weight: 1000;
      font-size: 14px;
    }
    .offerCard .d{
      font-size: 12px;
      opacity: .95;
      line-height: 1.5;
    }
    .offerCard .tag{
      margin-top:6px;
      width: fit-content;
      padding: 6px 10px;
      border-radius: 999px;
      background: rgba(243,236,220,.92);
      color: var(--green);
      font-weight: 1000;
      font-size: 12px;
    }

    /* ===== Ø¨Ø·Ø§Ù‚Ø© Ù‚Ø³Ù… ===== */
    .sectionCard{
      background: var(--card);
      border:1px solid var(--stroke);
      border-radius: var(--r);
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    .sectionHead{
      padding: 12px 14px;
      background: linear-gradient(90deg, rgba(79,111,82,.10), rgba(243,236,220,.65));
      border-bottom: 1px solid rgba(0,0,0,.06);
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
    }
    .sectionHead h2{
      margin:0;
      font-size: 16px;
      font-weight: 1000;
      color: var(--green);
      display:flex;
      align-items:center;
      gap:10px;
    }
    .chip{
      font-size: 12px;
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid rgba(0,0,0,.10);
      background:#fff;
      color: var(--muted);
      white-space:nowrap;
      font-weight:900;
    }

    /* ===== Ø¹Ù†Ø§ØµØ± Ø§Ù„Ù…Ù†ÙŠÙˆ ===== */
    .items{
      padding: 12px;
      display:grid;
      gap:10px;
    }

    .item{
      border:1px solid rgba(0,0,0,.08);
      border-radius: 18px;
      padding: 12px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      background:#fff;
    }

    /* ØµÙˆØ±Ø© Ø¯Ø§Ø¦Ø±ÙŠØ© Ù…Ù†Ø§Ø³Ø¨Ø© Ù„Ù„Ø¬ÙˆØ§Ù„ */
    .avatar{
      width:62px;height:62px;
      border-radius:999px;
      overflow:hidden;
      border:1px solid rgba(0,0,0,.08);
      flex: 0 0 auto;
      background: radial-gradient(circle at 30% 20%, rgba(79,111,82,.18), rgba(243,236,220,.55));
    }
    .avatar img{
      width:100%;
      height:100%;
      object-fit:cover;
      display:block;
    }

    .info{
      flex: 1;
      min-width: 0;
      display:flex;
      flex-direction:column;
      gap:6px;
    }

    /* Ø®Ø· ÙƒØ¨ÙŠØ± ÙˆÙˆØ§Ø¶Ø­ */
    .nameRow{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:10px;
    }
    .name{
      font-size: 16px;
      font-weight: 1000;
      line-height: 1.2;
    }
    .sub{
      font-size: 12px;
      color: var(--muted);
      line-height: 1.3;
    }
    .price{
      font-size: 16px;
      font-weight: 1000;
      color: var(--green);
      white-space:nowrap;
    }

    /* Ø£Ø²Ø±Ø§Ø± Ø§Ù„ÙƒÙ…ÙŠØ© Ø£ÙƒØ¨Ø± Ù„Ù„Ø¬ÙˆØ§Ù„ */
    .qtyRow{
      display:flex;
      align-items:center;
      gap:10px;
      justify-content:flex-end;
      margin-top: 4px;
    }
    .qbtn{
      width:40px;height:40px;
      border-radius: 14px;
      border:1px solid rgba(0,0,0,.12);
      background:#fff;
      font-weight: 1000;
      cursor:pointer;
      font-size: 18px;
    }
    .qty{
      min-width: 40px;
      text-align:center;
      font-weight: 1000;
      font-size: 16px;
    }

    /* ===== Ø´Ø±ÙŠØ· Ø§Ù„Ø³Ù„Ø© Ø§Ù„Ø³ÙÙ„ÙŠ ===== */
    .cartBar{
      position: fixed;
      left: 0;
      right: 0;
      bottom: 0;
      z-index: 40;
      background: rgba(255,255,255,.94);
      backdrop-filter: blur(10px);
      border-top: 1px solid rgba(0,0,0,.10);
      padding: 12px 14px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 12px;
    }
    .cartMeta{
      display:flex;
      flex-direction:column;
      gap: 4px;
    }
    .cartMeta .mini{
      font-size: 12px;
      color: var(--muted);
      font-weight:900;
    }
    .cartMeta .big{
      font-size: 16px;
      font-weight: 1000;
      color: var(--ink);
    }
    .cartActions{
      display:flex;
      gap:10px;
      align-items:center;
    }
    .bubble{
      background: rgba(79,111,82,.10);
      border:1px solid rgba(79,111,82,.25);
      color: var(--green);
      font-weight:1000;
      border-radius: 999px;
      padding: 8px 10px;
      font-size: 12px;
      white-space:nowrap;
    }

    /* ===== Ù†Ø§ÙØ°Ø© Ø§Ù„Ø¥ØªÙ…Ø§Ù… (Popup) ===== */
    .modalBack{
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,.45);
      display:none;
      align-items:flex-end;
      justify-content:center;
      z-index: 60;
      padding: 14px;
    }
    .modal{
      width: min(560px, 100%);
      background: #fff;
      border-radius: 22px;
      box-shadow: 0 20px 45px rgba(0,0,0,.22);
      overflow:hidden;
      border:1px solid rgba(0,0,0,.08);
    }
    .modalHead{
      padding: 12px 14px;
      background: linear-gradient(90deg, rgba(79,111,82,.10), rgba(243,236,220,.75));
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      border-bottom:1px solid rgba(0,0,0,.06);
    }
    .modalHead strong{
      color: var(--green);
      font-size: 16px;
      font-weight: 1000;
    }
    .x{
      width:42px;height:42px;
      border-radius: 16px;
      border:1px solid rgba(0,0,0,.10);
      background:#fff;
      cursor:pointer;
      font-weight: 1000;
    }
    .modalBody{
      padding: 14px;
      display:grid;
      gap: 12px;
    }

    label{
      display:block;
      font-size: 12px;
      color: var(--muted);
      margin: 0 0 6px;
      font-weight: 900;
    }
    input, select, textarea{
      width:100%;
      border:1px solid rgba(0,0,0,.12);
      border-radius: 14px;
      padding: 12px 12px;
      font-size: 15px;
      outline:none;
      background:#fff;
    }
    textarea{ min-height: 90px; resize: vertical; }

    .row{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:10px;
    }
    @media (max-width: 520px){
      .row{ grid-template-columns:1fr; }
    }

    .summary{
      border-top: 1px dashed rgba(0,0,0,.22);
      padding-top: 12px;
      display:grid;
      gap: 6px;
      font-size: 14px;
    }
    .line{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 10px;
    }
    .total{
      color: var(--green);
      font-weight: 1000;
      font-size: 18px;
    }

    .note{
      font-size: 12px;
      color: var(--muted);
      line-height: 1.6;
    }
  </style>
</head>

<body>

  <header>
    <div class="brand">
      <div class="mark">Ù†</div>
      <div>Ø·Ù„Ø¨Ø§Øª Ù†ÙŠØ´Ø§</div>
    </div>
    <div class="topBtns">
      <a class="btn" href="index.html">Ø±Ø¬ÙˆØ¹</a>
      <button class="btn primary" id="openCheckoutTop">Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø·Ù„Ø¨</button>
    </div>
  </header>

  <!-- Ø¹Ø±ÙˆØ¶ Ù†ÙŠØ´Ø§ -->
  <section class="wrap" style="padding-bottom:0;">
    <div class="offersBox">
      <div class="offersHead">
        <strong>Ø¹Ø±ÙˆØ¶ Ù†ÙŠØ´Ø§</strong>
        <span>ØªØ­Ø¯ÙŠØ« Ù…Ø³ØªÙ…Ø±</span>
      </div>
      <div class="offersRow" id="offersRow"></div>
    </div>
  </section>

  <main class="wrap" id="menuRoot"></main>

  <!-- Ø´Ø±ÙŠØ· Ø§Ù„Ø³Ù„Ø© Ø§Ù„Ø³ÙÙ„ÙŠ -->
  <div class="cartBar">
    <div class="cartMeta">
      <div class="mini">Ø§Ù„Ø³Ù„Ø©</div>
      <div class="big" id="cartTotal">0 Ø±.Ø³</div>
    </div>

    <div class="cartActions">
      <span class="bubble" id="cartCount">0 Ù‚Ø·Ø¹Ø©</span>
      <button class="btn primary" id="openCheckout">Ø¥ØªÙ…Ø§Ù…</button>
    </div>
  </div>

  <!-- Ù†Ø§ÙØ°Ø© Ø§Ù„Ø¥ØªÙ…Ø§Ù… -->
  <div class="modalBack" id="modalBack" aria-hidden="true">
    <div class="modal" role="dialog" aria-label="Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø·Ù„Ø¨">
      <div class="modalHead">
        <strong>Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø·Ù„Ø¨</strong>
        <button class="x" id="closeModal">âœ•</button>
      </div>

      <div class="modalBody">
        <div class="row">
          <div>
            <label>Ø§Ù„Ø§Ø³Ù…</label>
            <input id="name" placeholder="Ù…Ø«Ø§Ù„: Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡" />
          </div>
          <div>
            <label>Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„</label>
            <input id="phone" placeholder="05xxxxxxxx" inputmode="tel" />
          </div>
        </div>

        <div class="row">
          <div>
            <label>Ø§Ø³ØªÙ„Ø§Ù… / ØªÙˆØµÙŠÙ„</label>
            <select id="type">
              <option value="Ø§Ø³ØªÙ„Ø§Ù…">Ø§Ø³ØªÙ„Ø§Ù…</option>
              <option value="ØªÙˆØµÙŠÙ„">ØªÙˆØµÙŠÙ„</option>
            </select>
          </div>
          <div>
            <label>Ø§Ù„Ø¯ÙØ¹</label>
            <select id="pay">
              <option value="Ø´Ø¨ÙƒØ©">Ø´Ø¨ÙƒØ©</option>
              <option value="ÙƒØ§Ø´">ÙƒØ§Ø´</option>
            </select>
          </div>
        </div>

        <div class="row" id="addrRow" style="display:none;">
          <div style="grid-column:1/-1;">
            <label>Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ØªÙˆØµÙŠÙ„ / Ø±Ø§Ø¨Ø· Ø§Ù„Ù„ÙˆÙƒÙŠØ´Ù†</label>
            <input id="addr" placeholder="Ø§ÙƒØªØ¨ Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø£Ùˆ Ø¶Ø¹ Ø±Ø§Ø¨Ø· Google Maps" />
          </div>
        </div>

        <div>
          <label>Ù…Ù„Ø§Ø­Ø¸Ø§Øª (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</label>
          <textarea id="notes" placeholder="Ø¨Ø¯ÙˆÙ† Ø¨ØµÙ„ / Ø²ÙŠØ§Ø¯Ø© Ø¬Ø¨Ù† / ..."></textarea>
        </div>

        <div class="summary">
          <div class="line"><span>Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„Ø£ØµÙ†Ø§Ù</span><strong id="sub">0 Ø±.Ø³</strong></div>
          <div class="line"><span>Ø±Ø³ÙˆÙ… Ø§Ù„ØªÙˆØµÙŠÙ„</span><strong id="fee">0 Ø±.Ø³</strong></div>
          <div class="line"><span><strong>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ</strong></span><span class="total" id="final">0 Ø±.Ø³</span></div>
        </div>

        <button class="btn primary" id="sendWA" style="width:100%; justify-content:center; padding:14px 12px;">
          Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ Ø¹Ù„Ù‰ ÙˆØ§ØªØ³Ø§Ø¨
        </button>

        <div class="note">
          Ù…Ù„Ø§Ø­Ø¸Ø©: Ø³ÙŠØªÙ… ÙØªØ­ ÙˆØ§ØªØ³Ø§Ø¨ Ø¨Ø±Ø³Ø§Ù„Ø© Ø¬Ø§Ù‡Ø²Ø© â€” Ø§Ù„Ø¹Ù…ÙŠÙ„ ÙŠØ¶ØºØ· â€œØ¥Ø±Ø³Ø§Ù„â€.
        </div>
      </div>
    </div>
  </div>

  <script>
    /* ==========================================================
      âœ… Ø¹Ø¯Ù‘Ù„ Ù‡Ù†Ø§ ÙÙ‚Ø·:
      1) Ø±Ù‚Ù… Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ Ø¨ØµÙŠØºØ© Ø¯ÙˆÙ„ÙŠØ© Ø¨Ø¯ÙˆÙ† +
      2) Ø±Ø³ÙˆÙ… Ø§Ù„ØªÙˆØµÙŠÙ„ Ø«Ø§Ø¨Øª 8 Ø±ÙŠØ§Ù„
      3) Ø§Ù„Ù…Ù†ÙŠÙˆ + ØµÙˆØ± Ø§Ù„Ø£ØµÙ†Ø§Ù (Ø¯Ø§Ø¦Ø±ÙŠØ© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹)
    ========================================================== */

    // âœ… Ø±Ù‚Ù… Ø§Ù„ØªØ¬Ø±Ø¨Ø© (0595714236 Ø¨ØµÙŠØºØ© Ø¯ÙˆÙ„ÙŠØ©)
    const WHATSAPP_NUMBER = "966595714236";
    const DELIVERY_FEE = 8;

    // âœ… Ø¹Ø±ÙˆØ¶ Ù†ÙŠØ´Ø§ (Ø¹Ø¯Ù‘Ù„Ù‡Ø§ ÙƒÙ…Ø§ ØªØ±ÙŠØ¯)
    const OFFERS = [
      { title:"Ø¹Ø±Ø¶ Ø¨ÙˆÙƒØ³ Ù†ÙŠØ´Ø§", desc:"Ø¨ÙˆÙƒØ³ Ø¬Ø§Ù‡Ø² Ù„Ù„Ù…Ø´Ø§Ø±ÙƒØ© â€” Ù…Ù†Ø§Ø³Ø¨ Ù„Ù„Ø¯ÙˆØ§Ù… ÙˆØ§Ù„Ù„Ù…Ù‘Ø©.", tag:"Ø§Ù„Ø£ÙƒØ«Ø± Ø·Ù„Ø¨Ù‹Ø§" },
      { title:"Ø¹Ø±Ø¶ Ø§Ù„Ù…ÙŠÙ†ÙŠ", desc:"3 Ù…ÙŠÙ†ÙŠ Ø¨Ø§Ø®ØªÙŠØ§Ø±Ùƒ â€” Ø³Ø±ÙŠØ¹ ÙˆØ®ÙÙŠÙ.", tag:"Ø³Ø±ÙŠØ¹" },
      { title:"Ø¹Ø±Ø¶ Ø§Ù„Ø®Ù„ÙŠØ©", desc:"Ø§Ù„Ø®Ù„ÙŠØ© Ø§Ù„ÙƒÙ„Ø§Ø³ÙŠÙƒ Ø¨Ø³Ø¹Ø± Ø£ÙØ¶Ù„ Ù„ÙØªØ±Ø© Ù…Ø­Ø¯ÙˆØ¯Ø©.", tag:"Limited" }
    ];

    const MENU = [
      {
        section: "ğŸ¥™ Ø§Ù„Ù…Ù†Ø§Ù‚ÙŠØ´",
        items: [
          { name:"Ø¯Ø¬Ø§Ø¬", price:12, img:"https://images.unsplash.com/photo-1604908812537-4f88bb9d3f49?auto=format&fit=crop&w=300&q=70" },
          { name:"Ù…ÙƒØ³ Ø£Ø¬Ø¨Ø§Ù†", price:12, img:"https://images.unsplash.com/photo-1546549032-9571cd6b27df?auto=format&fit=crop&w=300&q=70" },
          { name:"Ø²Ø¹ØªØ±", price:11, img:"https://images.unsplash.com/photo-1604908554606-77b8e4a3a5c1?auto=format&fit=crop&w=300&q=70" },
          { name:"Ù…Ø­Ù…Ø±Ù‡", price:11, img:"https://images.unsplash.com/photo-1604908554571-0c1e9c7b7a0b?auto=format&fit=crop&w=300&q=70" },
          { name:"Ù„Ø¨Ù†Ù‡", price:11, img:"https://images.unsplash.com/photo-1604908554244-5b0b3db2bf0c?auto=format&fit=crop&w=300&q=70" },
          { name:"Ø¬Ø¨Ù†", price:11, img:"https://images.unsplash.com/photo-1546549032-9571cd6b27df?auto=format&fit=crop&w=300&q=70" },
          { name:"Ù…Ø§Ø±Ø¬Ø±ÙŠØªØ§", price:11, img:"https://images.unsplash.com/photo-1548365328-8b849e6f3f98?auto=format&fit=crop&w=300&q=70" },
          { name:"Ø³Ø¨Ø§Ù†Ø®", price:11, img:"https://images.unsplash.com/photo-1604908554088-3c9b4b8f0a3b?auto=format&fit=crop&w=300&q=70" },
          { name:"Ø¹ÙƒØ§ÙˆÙŠ", price:11, img:"https://images.unsplash.com/photo-1541592106381-b31e9677c0e5?auto=format&fit=crop&w=300&q=70" },
        ]
      },
      {
        section: "ğŸ• Ø§Ù„Ø¨ÙŠØªØ²Ø§",
        items: [
          { name:"Ø¯Ø¬Ø§Ø¬", price:20, img:"https://images.unsplash.com/photo-1548365328-8b849e6f3f98?auto=format&fit=crop&w=300&q=70" },
          { name:"Ù„Ø­Ù…", price:22, img:"https://images.unsplash.com/photo-1593560708920-61dd98c46a66?auto=format&fit=crop&w=300&q=70" },
          { name:"Ø¨Ø¨Ø±ÙˆÙ†ÙŠ", price:22, img:"https://images.unsplash.com/photo-1601924582970-9238bcb495d9?auto=format&fit=crop&w=300&q=70" },
          { name:"Ù…ÙƒØ³", price:23, img:"https://images.unsplash.com/photo-1604068549290-dea0e4a305ca?auto=format&fit=crop&w=300&q=70" },
          { name:"Ù†ÙŠØ´Ø§", price:25, img:"https://images.unsplash.com/photo-1601924638867-3ec5f3d79f0a?auto=format&fit=crop&w=300&q=70" },
          { name:"Ø®Ø¶Ø§Ø±", price:20, img:"https://images.unsplash.com/photo-1542281286-9e0a16bb7366?auto=format&fit=crop&w=300&q=70" },
          { name:"Ø¹Ø´ Ø§Ù„Ø¨Ù„Ø¨Ù„", price:20, img:"https://images.unsplash.com/photo-1590947132387-155cc02f3212?auto=format&fit=crop&w=300&q=70" },
        ]
      },
      {
        section: "ğŸ Ø§Ù„Ø®Ù„ÙŠØ©",
        items: [
          { name:"ÙƒÙ„Ø§Ø³ÙŠÙƒ ØµØºÙŠØ±", price:15, img:"https://images.unsplash.com/photo-1519869325930-281384150729?auto=format&fit=crop&w=300&q=70" },
          { name:"ÙƒÙ„Ø§Ø³ÙŠÙƒ ÙƒØ¨ÙŠØ±", price:30, img:"https://images.unsplash.com/photo-1519869325930-281384150729?auto=format&fit=crop&w=300&q=70" },
          { name:"Ø¨ÙŠÙƒØ§Ù† ØµØºÙŠØ±", price:18, img:"https://images.unsplash.com/photo-1509440159598-7f9a04f8a682?auto=format&fit=crop&w=300&q=70" },
          { name:"Ø¨ÙŠÙƒØ§Ù† ÙƒØ¨ÙŠØ±", price:35, img:"https://images.unsplash.com/photo-1509440159598-7f9a04f8a682?auto=format&fit=crop&w=300&q=70" },
          { name:"Ø³ÙŠÙ†Ø§Ø¨ÙˆÙ† ØµØºÙŠØ±", price:17, img:"https://images.unsplash.com/photo-1514516870926-206f2b0c5f7f?auto=format&fit=crop&w=300&q=70" },
          { name:"Ø³ÙŠÙ†Ø§Ø¨ÙˆÙ† ÙƒØ¨ÙŠØ±", price:33, img:"https://images.unsplash.com/photo-1514516870926-206f2b0c5f7f?auto=format&fit=crop&w=300&q=70" },
        ]
      },
      {
        section: "ğŸ¥ Ù…Ø¹Ø¬Ù†Ø§Øª Ù…ÙŠÙ†ÙŠ",
        items: [
          { name:"Ø¥Ù†ØµØ§Ù Ù‚Ù…Ø± (Ø¯Ø¬Ø§Ø¬/Ø¬Ø¨Ù†)", price:9, img:"https://images.unsplash.com/photo-1587248720327-8eb72564be1a?auto=format&fit=crop&w=300&q=70" },
          { name:"ÙƒØ§Ø¨ Ø¯Ø¬Ø§Ø¬ Ø¬Ø¨Ù†", price:9, img:"https://images.unsplash.com/photo-1587248720327-8eb72564be1a?auto=format&fit=crop&w=300&q=70" },
          { name:"Ø¨ÙŠØªØ²Ø§", price:9, img:"https://images.unsplash.com/photo-1548365328-8b849e6f3f98?auto=format&fit=crop&w=300&q=70" },
          { name:"Ù…Ø­Ù…Ø±Ù‡", price:9, img:"https://images.unsplash.com/photo-1604908554571-0c1e9c7b7a0b?auto=format&fit=crop&w=300&q=70" },
          { name:"Ø¹ÙƒØ§ÙˆÙŠ", price:9, img:"https://images.unsplash.com/photo-1541592106381-b31e9677c0e5?auto=format&fit=crop&w=300&q=70" },
          { name:"Ù…ÙƒØ³ Ø£Ø¬Ø¨Ø§Ù†", price:9, img:"https://images.unsplash.com/photo-1546549032-9571cd6b27df?auto=format&fit=crop&w=300&q=70" },
          { name:"Ø²Ø¹ØªØ±", price:9, img:"https://images.unsplash.com/photo-1604908554606-77b8e4a3a5c1?auto=format&fit=crop&w=300&q=70" },
        ]
      },
      {
        section: "ğŸ«“ Ø®Ø¨Ø² Ù†ÙŠØ´Ø§ Ø§Ù„Ù…Ø­Ø´ÙŠ",
        items: [
          { name:"Ø¯Ø¬Ø§Ø¬", price:13, img:"https://images.unsplash.com/photo-1604908812537-4f88bb9d3f49?auto=format&fit=crop&w=300&q=70" },
          { name:"Ù„Ø­Ù…", price:14, img:"https://images.unsplash.com/photo-1593560708920-61dd98c46a66?auto=format&fit=crop&w=300&q=70" },
          { name:"Ø£Ø¬Ø¨Ø§Ù†", price:12, img:"https://images.unsplash.com/photo-1546549032-9571cd6b27df?auto=format&fit=crop&w=300&q=70" },
          { name:"Ø®Ù„Ø·Ø© Ù†ÙŠØ´Ø§", price:15, img:"https://images.unsplash.com/photo-1601924638867-3ec5f3d79f0a?auto=format&fit=crop&w=300&q=70" },
        ]
      },
      {
        section: "ğŸ“¦ Ø¨ÙˆÙƒØ³Ø§Øª",
        items: [
          { name:"Ø¨ÙˆÙƒØ³ Ù†ÙŠØ´Ø§", price:24, img:"https://images.unsplash.com/photo-1606851091765-6e7f78d851b6?auto=format&fit=crop&w=300&q=70" },
          { name:"Ø¨ÙˆÙƒØ³ Ø¬Ù…Ø§Ø¹ØªÙ†Ø§", price:49, img:"https://images.unsplash.com/photo-1606851091765-6e7f78d851b6?auto=format&fit=crop&w=300&q=70" },
          { name:"Ø¨ÙˆÙƒØ³ Ù„Ù…ØªÙ†Ø§", price:80, img:"https://images.unsplash.com/photo-1606851091765-6e7f78d851b6?auto=format&fit=crop&w=300&q=70" },
        ]
      },

      /* âœ… Ù‚Ø³Ù… Ø§Ù„Ø¥Ø¶Ø§ÙØ§Øª (6 Ø£ØµÙ†Ø§Ù ÙØ§Ø¶ÙŠØ© - Ø£Ù†Øª ØªÙƒØªØ¨Ù‡Ø§) */
      {
        section: "â• Ø§Ù„Ø¥Ø¶Ø§ÙØ§Øª",
        items: [
          { name:"Ø¥Ø¶Ø§ÙØ© 1", price:0, img:"" },
          { name:"Ø¥Ø¶Ø§ÙØ© 2", price:0, img:"" },
          { name:"Ø¥Ø¶Ø§ÙØ© 3", price:0, img:"" },
          { name:"Ø¥Ø¶Ø§ÙØ© 4", price:0, img:"" },
          { name:"Ø¥Ø¶Ø§ÙØ© 5", price:0, img:"" },
          { name:"Ø¥Ø¶Ø§ÙØ© 6", price:0, img:"" },
        ]
      },
    ];

    /* ===========================
      ÙƒÙˆØ¯ Ø§Ù„ØªØ´ØºÙŠÙ„
    ============================ */
    const menuRoot = document.getElementById("menuRoot");
    const cartTotalEl = document.getElementById("cartTotal");
    const cartCountEl = document.getElementById("cartCount");
    const offersRow = document.getElementById("offersRow");

    const modalBack = document.getElementById("modalBack");
    const closeModal = document.getElementById("closeModal");
    const openCheckout = document.getElementById("openCheckout");
    const openCheckoutTop = document.getElementById("openCheckoutTop");

    const nameEl = document.getElementById("name");
    const phoneEl = document.getElementById("phone");
    const typeEl = document.getElementById("type");
    const payEl = document.getElementById("pay");
    const addrRow = document.getElementById("addrRow");
    const addrEl = document.getElementById("addr");
    const notesEl = document.getElementById("notes");

    const subEl = document.getElementById("sub");
    const feeEl = document.getElementById("fee");
    const finalEl = document.getElementById("final");
    const sendWA = document.getElementById("sendWA");

    // cart key: "section|name" => {qty, price}
    const cart = new Map();
    const keyOf = (section, item) => `${section}|${item.name}`;

    function renderOffers(){
      if(!offersRow) return;
      offersRow.innerHTML = "";
      OFFERS.forEach(o => {
        const c = document.createElement("div");
        c.className = "offerCard";
        c.innerHTML = `
          <div class="t">${o.title}</div>
          <div class="d">${o.desc}</div>
          <div class="tag">${o.tag}</div>
        `;
        offersRow.appendChild(c);
      });
    }

    function updateQty(k, price, delta){
      const cur = cart.get(k)?.qty || 0;
      const next = Math.max(0, cur + delta);
      if(next === 0) cart.delete(k);
      else cart.set(k, { qty: next, price });
      render();
    }

    function totals(){
      let sub = 0;
      let pieces = 0;

      for(const v of cart.values()){
        sub += v.qty * v.price;
        pieces += v.qty;
      }

      const isDelivery = (typeEl.value === "ØªÙˆØµÙŠÙ„");
      const fee = isDelivery ? DELIVERY_FEE : 0;
      const final = sub + fee;

      return { sub, fee, final, pieces };
    }

    function render(){
      menuRoot.innerHTML = "";

      MENU.forEach(sec => {
        const card = document.createElement("section");
        card.className = "sectionCard";

        const head = document.createElement("div");
        head.className = "sectionHead";
        head.innerHTML = `<h2>${sec.section}</h2><span class="chip">Ø§Ø®ØªØ± + / -</span>`;
        card.appendChild(head);

        const items = document.createElement("div");
        items.className = "items";

        sec.items.forEach(item => {
          const k = keyOf(sec.section, item);
          const qty = cart.get(k)?.qty || 0;

          const row = document.createElement("div");
          row.className = "item";

          const avatar = document.createElement("div");
          avatar.className = "avatar";
          const img = document.createElement("img");
          img.alt = item.name;
          img.loading = "lazy";
          img.src = item.img || "";
          img.onerror = () => { img.style.display = "none"; };
          avatar.appendChild(img);

          const info = document.createElement("div");
          info.className = "info";

          const nameRow = document.createElement("div");
          nameRow.className = "nameRow";

          const left = document.createElement("div");
          left.style.minWidth = "0";
          left.innerHTML = `
            <div class="name">${item.name}</div>
            <div class="sub">Ø·Ø§Ø²Ø¬ ÙŠÙˆÙ…ÙŠÙ‹Ø§ â€¢ Ù†ÙŠØ´Ø§</div>
          `;

          const price = document.createElement("div");
          price.className = "price";
          price.textContent = `${item.price} Ø±.Ø³`;

          nameRow.append(left, price);

          const qtyRow = document.createElement("div");
          qtyRow.className = "qtyRow";

          const minus = document.createElement("button");
          minus.className = "qbtn";
          minus.textContent = "âˆ’";
          minus.onclick = () => updateQty(k, item.price, -1);

          const q = document.createElement("div");
          q.className = "qty";
          q.textContent = qty;

          const plus = document.createElement("button");
          plus.className = "qbtn";
          plus.textContent = "+";
          plus.onclick = () => updateQty(k, item.price, +1);

          qtyRow.append(minus, q, plus);

          info.append(nameRow, qtyRow);

          row.append(avatar, info);
          items.appendChild(row);
        });

        card.appendChild(items);
        menuRoot.appendChild(card);
      });

      // ØªØ­Ø¯ÙŠØ« Ù…Ù„Ø®Øµ Ø§Ù„Ø³Ù„Ø©
      const { sub, fee, final, pieces } = totals();
      cartTotalEl.textContent = `${final} Ø±.Ø³`;
      cartCountEl.textContent = `${pieces} Ù‚Ø·Ø¹Ø©`;

      // ØªØ­Ø¯ÙŠØ« Ø¯Ø§Ø®Ù„ Ø§Ù„Ù†Ø§ÙØ°Ø©
      subEl.textContent = `${sub} Ø±.Ø³`;
      feeEl.textContent = `${fee} Ø±.Ø³`;
      finalEl.textContent = `${final} Ø±.Ø³`;
    }

    // ÙØªØ­/Ø¥ØºÙ„Ø§Ù‚ Ù†Ø§ÙØ°Ø© Ø§Ù„Ø¥ØªÙ…Ø§Ù…
    function openModal(){
      if(cart.size === 0){
        alert("Ø§Ø®ØªØ± Ø£ØµÙ†Ø§Ù Ø£ÙˆÙ„Ø§Ù‹ Ù‚Ø¨Ù„ Ø§Ù„Ø¥ØªÙ…Ø§Ù….");
        return;
      }
      modalBack.style.display = "flex";
      modalBack.setAttribute("aria-hidden", "false");
      render();
    }
    function close(){
      modalBack.style.display = "none";
      modalBack.setAttribute("aria-hidden", "true");
    }

    openCheckout.onclick = openModal;
    openCheckoutTop.onclick = openModal;
    closeModal.onclick = close;

    modalBack.addEventListener("click", (e) => {
      if(e.target === modalBack) close();
    });

    // Ø¥Ø¸Ù‡Ø§Ø± Ø­Ù‚Ù„ Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ù„Ù„ØªÙˆØµÙŠÙ„ + ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙØ§ØªÙˆØ±Ø©
    typeEl.addEventListener("change", () => {
      addrRow.style.display = (typeEl.value === "ØªÙˆØµÙŠÙ„") ? "grid" : "none";
      render();
    });

    function buildMessage(){
      const { sub, fee, final } = totals();
      const name = nameEl.value.trim() || "ØºÙŠØ± Ù…Ø°ÙƒÙˆØ±";
      const phone = phoneEl.value.trim() || "ØºÙŠØ± Ù…Ø°ÙƒÙˆØ±";
      const type = typeEl.value;
      const pay = payEl.value;
      const addr = (addrEl?.value || "").trim();
      const notes = notesEl.value.trim();

      const lines = [];
      for(const [k, v] of cart.entries()){
        const itemName = k.split("|")[1];
        lines.push(`- ${itemName} Ã—${v.qty} = ${v.qty * v.price} Ø±.Ø³`);
      }

      let msg =
`Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯ - Ù†ÙŠØ´Ø§
--------------------
Ø§Ù„Ø§Ø³Ù…: ${name}
Ø§Ù„Ø¬ÙˆØ§Ù„: ${phone}
Ù†ÙˆØ¹ Ø§Ù„Ø·Ù„Ø¨: ${type}
Ø§Ù„Ø¯ÙØ¹: ${pay}`;

      if(type === "ØªÙˆØµÙŠÙ„"){
        msg += `\nØ±Ø³ÙˆÙ… Ø§Ù„ØªÙˆØµÙŠÙ„: ${fee} Ø±.Ø³`;
        msg += `\nØ§Ù„Ø¹Ù†ÙˆØ§Ù†/Ø§Ù„Ù„ÙˆÙƒÙŠØ´Ù†: ${addr || "ØºÙŠØ± Ù…Ø°ÙƒÙˆØ±"}`;
      }

      msg += `
--------------------
Ø§Ù„Ø·Ù„Ø¨:
${lines.join("\n")}
--------------------
Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„Ø£ØµÙ†Ø§Ù: ${sub} Ø±.Ø³
Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ: ${final} Ø±.Ø³`;

      if(notes) msg += `\nÙ…Ù„Ø§Ø­Ø¸Ø§Øª: ${notes}`;

      return msg;
    }

    function onlyDigits(s){
      return (s || "").replace(/\D/g, "");
    }

    function validateCheckout(){
      const name = nameEl.value.trim();
      const phoneRaw = phoneEl.value.trim();
      const phoneDigits = onlyDigits(phoneRaw);

      if(!name){
        alert("Ø§ÙƒØªØ¨ Ø§Ù„Ø§Ø³Ù… Ø£ÙˆÙ„Ø§Ù‹.");
        return false;
      }

      if(phoneDigits.length < 9){
        alert("Ø§ÙƒØªØ¨ Ø±Ù‚Ù… Ø¬ÙˆØ§Ù„ ØµØ­ÙŠØ­.");
        return false;
      }

      const looksOK =
        phoneDigits.startsWith("966") ||
        phoneDigits.startsWith("05") ||
        phoneDigits.startsWith("5");

      if(!looksOK){
        alert("Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„ ØºÙŠØ± ÙˆØ§Ø¶Ø­. Ø§ÙƒØªØ¨ 05xxxxxxxx Ø£Ùˆ 5xxxxxxxx.");
        return false;
      }

      if(typeEl.value === "ØªÙˆØµÙŠÙ„"){
        const addr = (addrEl.value || "").trim();
        if(!addr){
          alert("Ù„Ù„ØªÙˆØµÙŠÙ„: Ø§ÙƒØªØ¨ Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø£Ùˆ Ø±Ø§Ø¨Ø· Ø§Ù„Ù„ÙˆÙƒÙŠØ´Ù†.");
          return false;
        }
      }

      return true;
    }

    // Ø¥Ø±Ø³Ø§Ù„ ÙˆØ§ØªØ³Ø§Ø¨ (Ø¨Ø¹Ø¯ Ø§Ù„ØªØ­Ù‚Ù‚)
    sendWA.addEventListener("click", () => {
      if(cart.size === 0){
        alert("Ø§Ù„Ø³Ù„Ø© ÙØ§Ø¶ÙŠØ©.");
        return;
      }
      if(!validateCheckout()) return;

      const msg = encodeURIComponent(buildMessage());
      window.open(`https://wa.me/${WHATSAPP_NUMBER}?text=${msg}`, "_blank", "noopener");
    });

    // ØªØ´ØºÙŠÙ„ Ø£ÙˆÙ„ÙŠ
    renderOffers();
    render();
  </script>
</body>
</html>
