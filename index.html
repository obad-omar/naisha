<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Ø§Ø·Ù„Ø¨ Ø§Ù„Ø¢Ù† | Ù†ÙŠØ´Ø§</title>

  <style>
    /* =========================
      Ù‡ÙˆÙŠØ© Ù†ÙŠØ´Ø§
      Ø£Ø®Ø¶Ø± Ø²ÙŠØªÙˆÙ†ÙŠ: #4F6F52
      Ø¨ÙŠØ¬ ÙƒØ±ÙŠÙ…ÙŠ:  #F3ECDC
      Ø£Ø³ÙˆØ¯ Ù…Ø·ÙÙŠ:  #2B2B2B
    ========================== */
    :root{
      --green:#4F6F52;
      --beige:#F3ECDC;

      --ink:#EDEDED;          /* Ù†Øµ ÙÙŠ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù…Ø¸Ù„Ù… */
      --muted:#B9B9B9;

      --bg1:#0E0F12;          /* Ø®Ù„ÙÙŠØ© */
      --bg2:#171A1F;

      --card:#14171C;         /* ÙƒØ±ÙˆØª */
      --stroke: rgba(255,255,255,.10);
      --shadow: 0 14px 28px rgba(0,0,0,.35);

      --r: 18px;
    }

    *{ box-sizing:border-box; }
    html{ scroll-behavior: smooth; }
    body{
      margin:0;
      font-family: system-ui, -apple-system, "Segoe UI", Tahoma, Arial, sans-serif;
      background: radial-gradient(1200px 700px at 15% -10%, rgba(79,111,82,.25), transparent 55%),
                  linear-gradient(180deg, var(--bg1), var(--bg2));
      color: var(--ink);
    }
    a{ color:inherit; text-decoration:none; }

    /* ===== Ù‡ÙŠØ¯Ø± Ø¹Ù„ÙˆÙŠ ===== */
    header{
      position: sticky;
      top: 0;
      z-index: 60;
      background: rgba(18,20,25,.82);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid rgba(255,255,255,.08);
      padding: 10px 12px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 10px;
    }
    .brand{
      display:flex;
      align-items:center;
      gap:10px;
      font-weight: 900;
      color: #DFF0E1;
      font-size: 16px;
    }
    .mark{
      width:42px;height:42px;
      border-radius: 14px;
      background: rgba(79,111,82,.95);
      color: #fff;
      display:grid;
      place-items:center;
      font-weight: 1000;
      font-size: 20px;
      box-shadow: 0 10px 22px rgba(79,111,82,.25);
      overflow:hidden;
      border:1px solid rgba(255,255,255,.10);
    }
    .mark img{ width:100%; height:100%; object-fit:cover; display:block; }

    .topBtns{ display:flex; gap:8px; align-items:center; }
    .btn{
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.04);
      color: var(--ink);
      border-radius: 14px;
      padding:10px 12px;
      font-weight: 900;
      cursor:pointer;
      display:inline-flex;
      align-items:center;
      gap:8px;
      user-select:none;
    }
    .btn.primary{
      background: rgba(79,111,82,.95);
      color:#fff;
      border-color: transparent;
    }

    /* ===== Ø´Ø±ÙŠØ· Ø§Ù„Ø£Ù‚Ø³Ø§Ù… Ø§Ù„Ø¹Ù„ÙˆÙŠ ===== */
    .catsBar{
      position: sticky;
      top: 64px;
      z-index: 55;
      background: rgba(15,17,21,.72);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid rgba(255,255,255,.08);
      padding: 10px 10px;
      overflow:auto;
      -webkit-overflow-scrolling: touch;
      white-space: nowrap;
    }
    .catBtn{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding: 10px 12px;
      margin-inline: 6px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.04);
      color: var(--ink);
      font-weight: 900;
      font-size: 13px;
      cursor:pointer;
    }
    .catBtn.active{
      border-color: rgba(79,111,82,.55);
      background: rgba(79,111,82,.18);
      color: #DFF0E1;
    }

    /* ===== ØªØ®Ø·ÙŠØ· Ø§Ù„ØµÙØ­Ø© ===== */
    .wrap{
      max-width: 980px;
      margin: 0 auto;
      padding: 12px;
      padding-bottom: 96px;
      display:grid;
      gap: 14px;
      position: relative;
      z-index: 10; /* ÙÙˆÙ‚ Ø§Ù„Ø«Ù„Ø¬ */
    }

    /* ===== Ø¹Ø±ÙˆØ¶ Ù†ÙŠØ´Ø§ ===== */
    .offersBox{
      background: linear-gradient(135deg, rgba(79,111,82,.92), rgba(79,111,82,.65));
      border: 1px solid rgba(255,255,255,.10);
      border-radius: 22px;
      box-shadow: 0 18px 38px rgba(0,0,0,.35);
      color: #F2F2F2;
      overflow:hidden;
    }
    .offersHead{
      padding: 14px 14px 10px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
    }
    .offersHead strong{ font-size: 16px; font-weight: 1000; }
    .offersHead span{ font-size: 12px; opacity:.9; font-weight: 900; }
    .offersRow{
      display:flex;
      gap:10px;
      padding: 0 14px 14px;
      overflow:auto;
      scroll-snap-type: x mandatory;
      -webkit-overflow-scrolling: touch;
    }
    .offerCard{
      min-width: 240px;
      scroll-snap-align: start;
      background: rgba(0,0,0,.16);
      border: 1px solid rgba(255,255,255,.12);
      border-radius: 18px;
      padding: 12px;
      display:grid;
      gap:6px;
    }
    .offerCard .t{ font-weight: 1000; font-size: 14px; }
    .offerCard .d{ font-size: 12px; opacity: .95; line-height: 1.5; }
    .offerCard .tag{
      margin-top:6px;
      width: fit-content;
      padding: 6px 10px;
      border-radius: 999px;
      background: rgba(255,255,255,.88);
      color: #234;
      font-weight: 1000;
      font-size: 12px;
    }

    /* ===== Ø¨Ø·Ø§Ù‚Ø© Ù‚Ø³Ù… ===== */
    .sectionCard{
      background: rgba(255,255,255,.03);
      border:1px solid rgba(255,255,255,.10);
      border-radius: var(--r);
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    .sectionHead{
      padding: 12px 14px;
      background: linear-gradient(90deg, rgba(79,111,82,.18), rgba(255,255,255,.02));
      border-bottom: 1px solid rgba(255,255,255,.08);
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
    }
    .sectionHead h2{
      margin:0;
      font-size: 16px;
      font-weight: 1000;
      color: #DFF0E1;
      display:flex;
      align-items:center;
      gap:10px;
    }
    .chip{
      font-size: 12px;
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.04);
      color: var(--muted);
      white-space:nowrap;
      font-weight:900;
    }

    /* ===== Ø¹Ù†Ø§ØµØ± Ø§Ù„Ù…Ù†ÙŠÙˆ ===== */
    .items{ padding: 12px; display:grid; gap:10px; }
    .item{
      border:1px solid rgba(255,255,255,.10);
      border-radius: 18px;
      padding: 12px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      background: rgba(0,0,0,.12);
    }

    .avatar{
      width:62px;height:62px;
      border-radius:999px;
      overflow:hidden;
      border:1px solid rgba(255,255,255,.10);
      flex: 0 0 auto;
      background: radial-gradient(circle at 30% 20%, rgba(79,111,82,.22), rgba(255,255,255,.06));
    }
    .avatar img{ width:100%; height:100%; object-fit:cover; display:block; }

    .info{
      flex: 1;
      min-width: 0;
      display:flex;
      flex-direction:column;
      gap:6px;
    }
    .nameRow{ display:flex; align-items:flex-start; justify-content:space-between; gap:10px; }
    .name{ font-size: 16px; font-weight: 1000; line-height: 1.2; }
    .sub{ font-size: 12px; color: var(--muted); line-height: 1.3; }
    .price{ font-size: 16px; font-weight: 1000; color: #CFEBD2; white-space:nowrap; }

    .qtyRow{
      display:flex;
      align-items:center;
      gap:10px;
      justify-content:flex-end;
      margin-top: 4px;
    }
    .qbtn{
      width:40px;height:40px;
      border-radius: 14px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.04);
      color: var(--ink);
      font-weight: 1000;
      cursor:pointer;
      font-size: 18px;
    }
    .qty{
      min-width: 40px;
      text-align:center;
      font-weight: 1000;
      font-size: 16px;
      color: var(--ink);
    }

    /* ===== Ø´Ø±ÙŠØ· Ø§Ù„Ø³Ù„Ø© Ø§Ù„Ø³ÙÙ„ÙŠ ===== */
    .cartBar{
      position: fixed;
      left: 0;
      right: 0;
      bottom: 0;
      z-index: 70;
      background: rgba(15,17,21,.85);
      backdrop-filter: blur(10px);
      border-top: 1px solid rgba(255,255,255,.10);
      padding: 12px 14px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 12px;
    }
    .cartMeta{ display:flex; flex-direction:column; gap: 4px; }
    .cartMeta .mini{ font-size: 12px; color: var(--muted); font-weight:900; }
    .cartMeta .big{ font-size: 16px; font-weight: 1000; color: var(--ink); }

    .cartActions{ display:flex; gap:10px; align-items:center; }
    .bubble{
      background: rgba(79,111,82,.18);
      border:1px solid rgba(79,111,82,.35);
      color: #DFF0E1;
      font-weight:1000;
      border-radius: 999px;
      padding: 8px 10px;
      font-size: 12px;
      white-space:nowrap;
    }

    /* ===== Ø§Ù„Ù†ÙˆØ§ÙØ° (Popup) ===== */
    .modalBack{
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,.55);
      display:none;
      align-items:flex-end;
      justify-content:center;
      z-index: 90;
      padding: 14px;
    }
    .modal{
      width: min(560px, 100%);
      background: #0F1115;
      color: var(--ink);
      border-radius: 22px;
      box-shadow: 0 20px 45px rgba(0,0,0,.55);
      overflow:hidden;
      border:1px solid rgba(255,255,255,.10);
    }
    .modalHead{
      padding: 12px 14px;
      background: linear-gradient(90deg, rgba(79,111,82,.18), rgba(255,255,255,.03));
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      border-bottom:1px solid rgba(255,255,255,.08);
    }
    .modalHead strong{ color: #DFF0E1; font-size: 16px; font-weight: 1000; }
    .x{
      width:42px;height:42px;
      border-radius: 16px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.04);
      color: var(--ink);
      cursor:pointer;
      font-weight: 1000;
    }
    .modalBody{ padding: 14px; display:grid; gap: 12px; }

    label{
      display:block;
      font-size: 12px;
      color: var(--muted);
      margin: 0 0 6px;
      font-weight: 900;
    }
    input, select, textarea{
      width:100%;
      border:1px solid rgba(255,255,255,.12);
      border-radius: 14px;
      padding: 12px 12px;
      font-size: 15px;
      outline:none;
      background: rgba(255,255,255,.04);
      color: var(--ink);
    }
    textarea{ min-height: 90px; resize: vertical; }

    .row{ display:grid; grid-template-columns: 1fr 1fr; gap:10px; }
    @media (max-width: 520px){ .row{ grid-template-columns:1fr; } }

    .summary{
      border-top: 1px dashed rgba(255,255,255,.18);
      padding-top: 12px;
      display:grid;
      gap: 6px;
      font-size: 14px;
    }
    .line{ display:flex; align-items:center; justify-content:space-between; gap: 10px; }
    .total{ color: #CFEBD2; font-weight: 1000; font-size: 18px; }
    .note{ font-size: 12px; color: var(--muted); line-height: 1.6; }

    /* ===== Ø²Ø± Ø§Ø®ØªÙŠØ§Ø± (Ø­Ø¬Ù…/Ù†ÙˆØ¹) ===== */
    .pickBtn{
      width:100%;
      justify-content:center;
      padding:14px 12px;
      border-radius: 16px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.04);
      color: var(--ink);
      font-weight:1000;
      cursor:pointer;
    }
    .pickBtn strong{ color: #CFEBD2; }

    /* ===== Snow (Ù…Ø³ØªÙ…Ø± ÙˆÙƒØ«ÙŠÙ) ===== */
    #snow{
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 2;
      overflow:hidden;
    }
    .snowflake{
      position:absolute;
      top:-12px;
      border-radius:50%;
      background: rgba(255,255,255,.85);
      filter: blur(.25px);
      opacity:.9;
      will-change: transform;
      animation-name: fall;
      animation-timing-function: linear;
      animation-iteration-count: 1;
    }
    @keyframes fall{
      to{ transform: translate3d(var(--drift), 115vh, 0); }
    }
  </style>
</head>

<body>

  <header>
    <div class="brand">
      <!-- âœ… Ø¶Ø¹ Ø´Ø¹Ø§Ø±Ùƒ Ø¯Ø§Ø®Ù„ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø¨Ø§Ø³Ù…: logo.png -->
      <div class="mark" title="Ø´Ø¹Ø§Ø± Ù†ÙŠØ´Ø§">
        <img src="logo.png" alt="Ù†ÙŠØ´Ø§" onerror="this.style.display='none'; this.parentElement.textContent='Ù†';" />
      </div>
      <div>Ø·Ù„Ø¨Ø§Øª Ù†ÙŠØ´Ø§</div>
    </div>
    <div class="topBtns">
      <a class="btn" href="index.html">Ø±Ø¬ÙˆØ¹</a>
      <button class="btn primary" id="openCheckoutTop">Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø·Ù„Ø¨</button>
    </div>
  </header>

  <!-- âœ… Ø´Ø±ÙŠØ· Ø§Ù„Ø£Ù‚Ø³Ø§Ù… -->
  <div class="catsBar" id="catsBar"></div>

  <!-- âœ… Ø«Ù„Ø¬ Ù…Ø³ØªÙ…Ø± -->
  <div id="snow"></div>

  <!-- Ø¹Ø±ÙˆØ¶ Ù†ÙŠØ´Ø§ -->
  <section class="wrap" style="padding-bottom:0;">
    <div class="offersBox">
      <div class="offersHead">
        <strong>Ø¹Ø±ÙˆØ¶ Ù†ÙŠØ´Ø§</strong>
        <span>ØªØ­Ø¯ÙŠØ« Ù…Ø³ØªÙ…Ø±</span>
      </div>
      <div class="offersRow" id="offersRow"></div>
    </div>
  </section>

  <main class="wrap" id="menuRoot"></main>

  <!-- Ø´Ø±ÙŠØ· Ø§Ù„Ø³Ù„Ø© Ø§Ù„Ø³ÙÙ„ÙŠ -->
  <div class="cartBar">
    <div class="cartMeta">
      <div class="mini">Ø§Ù„Ø³Ù„Ø©</div>
      <div class="big" id="cartTotal">0 Ø±.Ø³</div>
    </div>

    <div class="cartActions">
      <span class="bubble" id="cartCount">0 Ù‚Ø·Ø¹Ø©</span>
      <button class="btn primary" id="openCheckout">Ø¥ØªÙ…Ø§Ù…</button>
    </div>
  </div>

  <!-- Ù†Ø§ÙØ°Ø© Ø§Ù„Ø¥ØªÙ…Ø§Ù… -->
  <div class="modalBack" id="checkoutBack" aria-hidden="true">
    <div class="modal" role="dialog" aria-label="Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø·Ù„Ø¨">
      <div class="modalHead">
        <strong>Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø·Ù„Ø¨</strong>
        <button class="x" id="closeCheckout">âœ•</button>
      </div>

      <div class="modalBody">
        <div class="row">
          <div>
            <label>Ø§Ù„Ø§Ø³Ù…</label>
            <input id="name" placeholder="Ù…Ø«Ø§Ù„: Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡" />
          </div>
          <div>
            <label>Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„</label>
            <input id="phone" placeholder="05xxxxxxxx" inputmode="tel" />
          </div>
        </div>

        <div class="row">
          <div>
            <label>Ø§Ø³ØªÙ„Ø§Ù… / ØªÙˆØµÙŠÙ„</label>
            <select id="type">
              <option value="Ø§Ø³ØªÙ„Ø§Ù…">Ø§Ø³ØªÙ„Ø§Ù…</option>
              <option value="ØªÙˆØµÙŠÙ„">ØªÙˆØµÙŠÙ„</option>
            </select>
          </div>
          <div>
            <label>Ø§Ù„Ø¯ÙØ¹</label>
            <select id="pay">
              <option value="Ø´Ø¨ÙƒØ©">Ø´Ø¨ÙƒØ©</option>
              <option value="ÙƒØ§Ø´">ÙƒØ§Ø´</option>
            </select>
          </div>
        </div>

        <div class="row" id="addrRow" style="display:none;">
          <div style="grid-column:1/-1;">
            <label>Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ØªÙˆØµÙŠÙ„ / Ø±Ø§Ø¨Ø· Ø§Ù„Ù„ÙˆÙƒÙŠØ´Ù†</label>
            <input id="addr" placeholder="Ø§ÙƒØªØ¨ Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø£Ùˆ Ø¶Ø¹ Ø±Ø§Ø¨Ø· Google Maps" />
          </div>
        </div>

        <div>
          <label>Ù…Ù„Ø§Ø­Ø¸Ø§Øª (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</label>
          <textarea id="notes" placeholder="Ø¨Ø¯ÙˆÙ† Ø¨ØµÙ„ / Ø²ÙŠØ§Ø¯Ø© Ø¬Ø¨Ù† / ..."></textarea>
        </div>

        <div class="summary">
          <div class="line"><span>Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„Ø£ØµÙ†Ø§Ù</span><strong id="sub">0 Ø±.Ø³</strong></div>
          <div class="line"><span>Ø±Ø³ÙˆÙ… Ø§Ù„ØªÙˆØµÙŠÙ„</span><strong id="fee">0 Ø±.Ø³</strong></div>
          <div class="line"><span><strong>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ</strong></span><span class="total" id="final">0 Ø±.Ø³</span></div>
        </div>

        <button class="btn primary" id="sendWA" style="width:100%; justify-content:center; padding:14px 12px;">
          Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ Ø¹Ù„Ù‰ ÙˆØ§ØªØ³Ø§Ø¨
        </button>

        <div class="note">
          Ù…Ù„Ø§Ø­Ø¸Ø©: Ø³ÙŠØªÙ… ÙØªØ­ ÙˆØ§ØªØ³Ø§Ø¨ Ø¨Ø±Ø³Ø§Ù„Ø© Ø¬Ø§Ù‡Ø²Ø© â€” Ø§Ù„Ø¹Ù…ÙŠÙ„ ÙŠØ¶ØºØ· â€œØ¥Ø±Ø³Ø§Ù„â€.
        </div>
      </div>
    </div>
  </div>

  <!-- âœ… Ù†Ø§ÙØ°Ø© Ø§Ø®ØªÙŠØ§Ø± (Ø­Ø¬Ù…/Ù†ÙˆØ¹) -->
  <div class="modalBack" id="pickBack" aria-hidden="true">
    <div class="modal" role="dialog" aria-label="Ø§Ø®ØªÙŠØ§Ø±">
      <div class="modalHead">
        <strong id="pickTitle">Ø§Ø®ØªØ±</strong>
        <button class="x" id="closePick">âœ•</button>
      </div>
      <div class="modalBody">
        <div class="note" id="pickNote">Ø§Ø®ØªØ± Ø§Ù„Ø®ÙŠØ§Ø± Ù„ÙŠØ¸Ù‡Ø± Ø§Ù„Ø³Ø¹Ø± âœ…</div>
        <div id="pickBtns" class="row"></div>
      </div>
    </div>
  </div>

  <script>
    /* ==========================================================
      âœ… Ø¹Ø¯Ù‘Ù„ Ù‡Ù†Ø§ ÙÙ‚Ø·:
      1) Ø±Ù‚Ù… Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ Ø¨ØµÙŠØºØ© Ø¯ÙˆÙ„ÙŠØ© Ø¨Ø¯ÙˆÙ† +
      2) Ø±Ø³ÙˆÙ… Ø§Ù„ØªÙˆØµÙŠÙ„
      3) Ø¹Ø¯Ù‘Ù„ Ø§Ù„Ù…Ù†ÙŠÙˆ/Ø§Ù„Ø£Ø³Ø¹Ø§Ø±/Ø§Ù„ØµÙˆØ±
    ========================================================== */
    const WHATSAPP_NUMBER = "966558608699Ø³";
    const DELIVERY_FEE = 8;

    const OFFERS = [
      { title:"Ø¹Ø±Ø¶ Ø¨ÙˆÙƒØ³ Ù†ÙŠØ´Ø§", desc:"Ø¨ÙˆÙƒØ³ Ø¬Ø§Ù‡Ø² Ù„Ù„Ù…Ø´Ø§Ø±ÙƒØ© â€” Ù…Ù†Ø§Ø³Ø¨ Ù„Ù„Ø¯ÙˆØ§Ù… ÙˆØ§Ù„Ù„Ù…Ù‘Ø©.", tag:"Ø§Ù„Ø£ÙƒØ«Ø± Ø·Ù„Ø¨Ù‹Ø§" },
      { title:"Ø¹Ø±Ø¶ Ø§Ù„Ù…ÙŠÙ†ÙŠ", desc:"3 Ù…ÙŠÙ†ÙŠ Ø¨Ø§Ø®ØªÙŠØ§Ø±Ùƒ â€” Ø³Ø±ÙŠØ¹ ÙˆØ®ÙÙŠÙ.", tag:"Ø³Ø±ÙŠØ¹" },
      { title:"Ø¹Ø±Ø¶ Ø§Ù„Ø®Ù„ÙŠØ©", desc:"Ø§Ù„Ø®Ù„ÙŠØ© Ø§Ù„ÙƒÙ„Ø§Ø³ÙŠÙƒ Ø¨Ø³Ø¹Ø± Ø£ÙØ¶Ù„ Ù„ÙØªØ±Ø© Ù…Ø­Ø¯ÙˆØ¯Ø©.", tag:"Limited" }
    ];

    /* ==========================================================
      âœ… Ø§Ù„Ù…Ù†ÙŠÙˆ
      - Ø§Ù„Ø¨ÙŠØªØ²Ø§: sizes
      - Ø£ØµÙ†Ø§Ù ØªØ­ØªØ§Ø¬ Ø§Ø®ØªÙŠØ§Ø± Ù†ÙˆØ¹: variants
    ========================================================== */
    const MENU = [
      {
        section: "ğŸ¥™ Ø§Ù„Ù…Ù†Ø§Ù‚ÙŠØ´",
        items: [
          { name:"Ø¯Ø¬Ø§Ø¬", price:12, img:"https://images.unsplash.com/photo-1604908812537-4f88bb9d3f49?auto=format&fit=crop&w=300&q=70" },
          { name:"Ù…ÙƒØ³ Ø£Ø¬Ø¨Ø§Ù†", price:12, img:"https://images.unsplash.com/photo-1546549032-9571cd6b27df?auto=format&fit=crop&w=300&q=70" },
          { name:"Ø²Ø¹ØªØ±", price:11, img:"https://images.unsplash.com/photo-1604908554606-77b8e4a3a5c1?auto=format&fit=crop&w=300&q=70" },
          { name:"Ù…Ø­Ù…Ø±Ø©", price:11, img:"https://images.unsplash.com/photo-1604908554571-0c1e9c7b7a0b?auto=format&fit=crop&w=300&q=70" },
          { name:"Ù„Ø¨Ù†Ø©", price:11, img:"https://images.unsplash.com/photo-1604908554244-5b0b3db2bf0c?auto=format&fit=crop&w=300&q=70" },
          { name:"Ø¹ÙƒØ§ÙˆÙŠ", price:11, img:"https://images.unsplash.com/photo-1541592106381-b31e9677c0e5?auto=format&fit=crop&w=300&q=70" },
          { name:"Ø¬Ø¨Ù† Ø³Ø§Ø¦Ù„", price:11, img:"https://images.unsplash.com/photo-1546549032-9571cd6b27df?auto=format&fit=crop&w=300&q=70" }
        ]
      },

      {
        section: "ğŸ Ø§Ù„Ø®Ù„ÙŠØ©",
        items: [
          { name:"ÙƒÙ„Ø§Ø³ÙŠÙƒ ØµØºÙŠØ±", price:16, img:"https://images.unsplash.com/photo-1519869325930-281384150729?auto=format&fit=crop&w=300&q=70" },
          { name:"ÙƒÙ„Ø§Ø³ÙŠÙƒ ÙƒØ¨ÙŠØ±", price:35, img:"https://images.unsplash.com/photo-1519869325930-281384150729?auto=format&fit=crop&w=300&q=70" },
          { name:"Ø³ÙŠÙ†Ø§Ø¨ÙˆÙ† ØµØºÙŠØ±", price:18, img:"https://images.unsplash.com/photo-1514516870926-206f2b0c5f7f?auto=format&fit=crop&w=300&q=70" },
          { name:"Ø³ÙŠÙ†Ø§Ø¨ÙˆÙ† ÙƒØ¨ÙŠØ±", price:38, img:"https://images.unsplash.com/photo-1514516870926-206f2b0c5f7f?auto=format&fit=crop&w=300&q=70" }
        ]
      },

      {
        section: "ğŸ¥ Ù…Ø¹Ø¬Ù†Ø§Øª Ù…ÙŠÙ†ÙŠ",
        items: [
          /* âœ… Ø£Ù‚Ù…Ø§Ø±: Ù„Ø§Ø²Ù… Ø§Ø®ØªÙŠØ§Ø± (Ø²Ø¹ØªØ±/Ø¹ÙƒØ§ÙˆÙŠ/Ù…Ø­Ù…Ø±Ø©/Ù…ÙƒØ³ Ø£Ø¬Ø¨Ø§Ù†/Ø¨ÙŠØªØ²Ø§) */
          {
            name:"Ø£Ù‚Ù…Ø§Ø±",
            price:9,
            img:"https://images.unsplash.com/photo-1587248720327-8eb72564be1a?auto=format&fit=crop&w=300&q=70",
            variants: { "Ø²Ø¹ØªØ±":9, "Ø¹ÙƒØ§ÙˆÙŠ":9, "Ù…Ø­Ù…Ø±Ø©":9, "Ù…ÙƒØ³ Ø£Ø¬Ø¨Ø§Ù†":9, "Ø¨ÙŠØªØ²Ø§":9 }
          },
          /* âœ… Ø£Ù†ØµØ§Ù Ù‚Ù…Ø±: Ø¯Ø¬Ø§Ø¬ Ø§Ùˆ Ø¬Ø¨Ù† */
          {
            name:"Ø£Ù†ØµØ§Ù Ù‚Ù…Ø±",
            price:9,
            img:"https://images.unsplash.com/photo-1587248720327-8eb72564be1a?auto=format&fit=crop&w=300&q=70",
            variants: { "Ø¯Ø¬Ø§Ø¬":9, "Ø¬Ø¨Ù†":9 }
          },
          { name:"ÙƒØ§Ø¨", price:9, img:"https://images.unsplash.com/photo-1587248720327-8eb72564be1a?auto=format&fit=crop&w=300&q=70" }
        ]
      },

      {
        section: "â• Ø¥Ø¶Ø§ÙØ§Øª Ù†ÙŠØ´Ø§",
        items: [
          /* âœ… Ø³Ù…Ø¨ÙˆØ³Ø©: Ù„Ø§Ø²Ù… Ø§Ø®ØªÙŠØ§Ø± (Ø²Ø¹ØªØ±/Ø¹ÙƒØ§ÙˆÙŠ/Ù…Ø­Ù…Ø±Ø©/Ù…ÙƒØ³ Ø£Ø¬Ø¨Ø§Ù†/Ø¨ÙŠØªØ²Ø§) */
          {
            name:"Ø³Ù…Ø¨ÙˆØ³Ø©",
            price:9,
            img:"",
            variants: { "Ø¬Ø¨Ù†":9,"Ø¯Ø¬Ø§Ø¬":9 }
          },
          { name:"Ø­Ø³Ø§ÙˆÙŠ", price:10, img:"" },
          { name:"Ø£Ù†ØµØ§Ù Ø­Ø³Ø§ÙˆÙŠ", price:9, img:"" },
          { name:"Ø¨Ø³Ø¨ÙˆØ³Ø©", price:10, img:"" },
          { name:"ÙˆØ±Ù‚ Ø¹Ù†Ø¨", price:30, img:"" },
          { name:"Ø­Ù„Ø§ Ù†ÙŠØ´Ø§", price:10, img:"" }
        ]
      },

      {
        section: "ğŸ³ Ø­Ù…Ø³Ø© Ù†ÙŠØ´Ø§",
        items: [
          { name:"Ø¯Ø¬Ø§Ø¬", price:12, img:"" },
          { name:"Ù„Ø­Ù…", price:13, img:"" },
          { name:"Ø¨ÙŠØ¶", price:11, img:"" },
          { name:"Ø®Ø¶Ø§Ø±", price:11, img:"" },
          { name:"Ø¨ÙˆÙƒØ³ ØµØ¨Ø§Ø­ÙŠØ§Øª", price:60, img:"" },
          { name:"Ø¨ÙˆÙƒØ³ Ø£Ù…Ø³ÙŠØ©", price:100, img:"" }
        ]
      },

      {
        section: "ğŸ«“ Ø®Ø¨Ø² Ù†ÙŠØ´Ø§ Ø§Ù„Ù…Ø­Ø´ÙŠ",
        items: [
          { name:"Ø¨ÙˆÙ„ÙŠØªÙˆ", price:13, img:"" },
          { name:"Ø£ÙˆÙØ§", price:12, img:"" },
          { name:"Ø¨Ø§ØªÙŠ", price:12, img:"" },
          { name:"ÙƒØ§Ø±Ù†Ùˆ", price:14, img:"" }
        ]
      },

      /* âœ… Ø§Ù„Ø¨ÙŠØªØ²Ø§ Ø¨Ø§Ù„Ù…Ù‚Ø§Ø³Ø§Øª */
      {
        section: "ğŸ• Ø§Ù„Ø¨ÙŠØªØ²Ø§",
        items: [
          { name:"Ø¯Ø¬Ø§Ø¬", sizes:{ "ØµØºÙŠØ±":13, "ÙˆØ³Ø·":17, "ÙƒØ¨ÙŠØ±":21 }, img:"https://images.unsplash.com/photo-1548365328-8b849e6f3f98?auto=format&fit=crop&w=300&q=70" },
          { name:"Ø¨Ø¨Ø±ÙˆÙ†ÙŠ", sizes:{ "ØµØºÙŠØ±":10, "ÙˆØ³Ø·":16, "ÙƒØ¨ÙŠØ±":19 }, img:"https://images.unsplash.com/photo-1601924582970-9238bcb495d9?auto=format&fit=crop&w=300&q=70" },
          { name:"Ù†Ù‚Ø§Ù†Ù‚", sizes:{ "ØµØºÙŠØ±":9, "ÙˆØ³Ø·":16, "ÙƒØ¨ÙŠØ±":19 }, img:"https://images.unsplash.com/photo-1604068549290-dea0e4a305ca?auto=format&fit=crop&w=300&q=70" },
          { name:"Ù„Ø­Ù…", sizes:{ "ØµØºÙŠØ±":14, "ÙˆØ³Ø·":18, "ÙƒØ¨ÙŠØ±":22 }, img:"https://images.unsplash.com/photo-1593560708920-61dd98c46a66?auto=format&fit=crop&w=300&q=70" },
          { name:"Ø±Ø§Ù†Ø´", sizes:{ "ØµØºÙŠØ±":14, "ÙˆØ³Ø·":18, "ÙƒØ¨ÙŠØ±":22 }, img:"https://images.unsplash.com/photo-1604068549290-dea0e4a305ca?auto=format&fit=crop&w=300&q=70" },
          { name:"Ø®Ø¶Ø§Ø±", sizes:{ "ØµØºÙŠØ±":9, "ÙˆØ³Ø·":16, "ÙƒØ¨ÙŠØ±":19 }, img:"https://images.unsplash.com/photo-1542281286-9e0a16bb7366?auto=format&fit=crop&w=300&q=70" },
          { name:"Ø¯Ø¬Ø§Ø¬ Ø®Ø¶Ø§Ø±", sizes:{ "ØµØºÙŠØ±":14, "ÙˆØ³Ø·":17, "ÙƒØ¨ÙŠØ±":22 }, img:"https://images.unsplash.com/photo-1604068549290-dea0e4a305ca?auto=format&fit=crop&w=300&q=70" },
          { name:"Ø¨Ø§Ø±Ø¨ÙƒÙŠÙˆ", sizes:{ "ØµØºÙŠØ±":14, "ÙˆØ³Ø·":18, "ÙƒØ¨ÙŠØ±":22 }, img:"https://images.unsplash.com/photo-1604068549290-dea0e4a305ca?auto=format&fit=crop&w=300&q=70" },
          { name:"Ù…ÙƒØ³ Ø£Ø¬Ø¨Ø§Ù†", sizes:{ "ØµØºÙŠØ±":12, "ÙˆØ³Ø·":16, "ÙƒØ¨ÙŠØ±":19 }, img:"https://images.unsplash.com/photo-1546549032-9571cd6b27df?auto=format&fit=crop&w=300&q=70" },
          { name:"Ø§Ø³Ø¨ÙŠØ´Ø§Ù„", sizes:{ "ØµØºÙŠØ±":12, "ÙˆØ³Ø·":16, "ÙƒØ¨ÙŠØ±":19 }, img:"https://images.unsplash.com/photo-1601924638867-3ec5f3d79f0a?auto=format&fit=crop&w=300&q=70" },
          { name:"Ø´Ø§ÙˆØ±Ù…Ø§", sizes:{ "ØµØºÙŠØ±":13, "ÙˆØ³Ø·":17, "ÙƒØ¨ÙŠØ±":21 }, img:"https://images.unsplash.com/photo-1604068549290-dea0e4a305ca?auto=format&fit=crop&w=300&q=70" },
          { name:"Ù…Ø§Ø±Ø¬Ø±ÙŠØªØ§", sizes:{ "ØµØºÙŠØ±":10, "ÙˆØ³Ø·":16, "ÙƒØ¨ÙŠØ±":19 }, img:"https://images.unsplash.com/photo-1548365328-8b849e6f3f98?auto=format&fit=crop&w=300&q=70" },
          { name:"Ù†ÙŠØ´Ø§", sizes:{ "ØµØºÙŠØ±":15, "ÙˆØ³Ø·":20, "ÙƒØ¨ÙŠØ±":25 }, img:"https://images.unsplash.com/photo-1601924638867-3ec5f3d79f0a?auto=format&fit=crop&w=300&q=70" },
          { name:"Ø¹Ø´ Ø§Ù„Ø¨Ù„Ø¨Ù„", sizes:{ "ØµØºÙŠØ±":9, "ÙˆØ³Ø·":16, "ÙƒØ¨ÙŠØ±":19 }, img:"https://images.unsplash.com/photo-1548365328-8b849e6f3f98?auto=format&fit=crop&w=300&q=70" }
        ]
      },

      {
        section: "ğŸŒ¯ Ø´Ø§ÙˆØ±Ù…Ø§",
        items: [
          { name:"ØµØ§Ø±ÙˆØ®", price:12, img:"" },
          { name:"Ø¹Ø±Ø¨ÙŠ ÙƒØ¨ÙŠØ±", price:28, img:"" },
          { name:"Ø¹Ø±Ø¨ÙŠ ØµØºÙŠØ±", price:14, img:"" },
          { name:"Ø³Ø§Ù†Ø¯ÙˆØªØ´", price:7, img:"" },
          { name:"ÙØ±Ø· ØµØºÙŠØ±", price:20, img:"" },
          { name:"ÙØ±Ø· ÙƒØ¨ÙŠØ±", price:35, img:"" },
          { name:"Ø´Ø§ÙˆØ±Ù…Ø§ Ø¹Ø§Ø¦Ù„ÙŠ", price:45, img:"" },
          { name:"Ø´Ø§ÙˆØ±Ù…Ø§ Ù†ÙŠØ´Ø§", price:100, img:"" }
        ]
      },

      {
        section: "ğŸ“¦ Ø¨ÙˆÙƒØ³Ø§Øª",
        items: [
          { name:"Ø¨ÙˆÙƒØ³ Ù†ÙŠØ´Ø§", price:23, img:"https://images.unsplash.com/photo-1606851091765-6e7f78d851b6?auto=format&fit=crop&w=300&q=70" },
          { name:"Ø¨ÙˆÙƒØ³ Ø¬Ù…Ø¹ØªÙ†Ø§", price:49, img:"https://images.unsplash.com/photo-1606851091765-6e7f78d851b6?auto=format&fit=crop&w=300&q=70" },
          { name:"Ø¨ÙˆÙƒØ³ Ù„Ù…ØªÙ†Ø§", price:60, img:"https://images.unsplash.com/photo-1606851091765-6e7f78d851b6?auto=format&fit=crop&w=300&q=70" },
          { name:"Ø¨ÙˆÙƒØ³ Ù†ÙŠØ´Ø§ Ø¨Ù„Ø³", price:80, img:"https://images.unsplash.com/photo-1606851091765-6e7f78d851b6?auto=format&fit=crop&w=300&q=70" }
        ]
      }
    ];

    /* ===========================
      Ø¹Ù†Ø§ØµØ± Ø§Ù„ØµÙØ­Ø©
    ============================ */
    const menuRoot = document.getElementById("menuRoot");
    const offersRow = document.getElementById("offersRow");
    const catsBar = document.getElementById("catsBar");

    const cartTotalEl = document.getElementById("cartTotal");
    const cartCountEl = document.getElementById("cartCount");

    const checkoutBack = document.getElementById("checkoutBack");
    const openCheckout = document.getElementById("openCheckout");
    const openCheckoutTop = document.getElementById("openCheckoutTop");
    const closeCheckout = document.getElementById("closeCheckout");

    const nameEl = document.getElementById("name");
    const phoneEl = document.getElementById("phone");
    const typeEl = document.getElementById("type");
    const payEl = document.getElementById("pay");
    const addrRow = document.getElementById("addrRow");
    const addrEl = document.getElementById("addr");
    const notesEl = document.getElementById("notes");
    const subEl = document.getElementById("sub");
    const feeEl = document.getElementById("fee");
    const finalEl = document.getElementById("final");
    const sendWA = document.getElementById("sendWA");

    // Ù†Ø§ÙØ°Ø© Ø§Ø®ØªÙŠØ§Ø± (Ø­Ø¬Ù…/Ù†ÙˆØ¹)
    const pickBack = document.getElementById("pickBack");
    const pickTitle = document.getElementById("pickTitle");
    const pickNote = document.getElementById("pickNote");
    const pickBtns = document.getElementById("pickBtns");
    const closePick = document.getElementById("closePick");

    // cart key => {qty, price, meta}
    const cart = new Map();

    const slug = (s) =>
      (s || "")
        .toString()
        .trim()
        .replace(/\s+/g, "-")
        .replace(/[^\u0600-\u06FFa-zA-Z0-9\-]/g, "")
        .toLowerCase();

    const baseKey = (section, name) => `${section}|${name}`;
    const choiceKey = (section, name, choiceLabel) => `${section}|${name}|${choiceLabel}`;

    function renderOffers(){
      offersRow.innerHTML = "";
      OFFERS.forEach(o => {
        const c = document.createElement("div");
        c.className = "offerCard";
        c.innerHTML = `
          <div class="t">${o.title}</div>
          <div class="d">${o.desc}</div>
          <div class="tag">${o.tag}</div>
        `;
        offersRow.appendChild(c);
      });
    }

    function totals(){
      let sub = 0;
      let pieces = 0;
      for(const v of cart.values()){
        sub += v.qty * v.price;
        pieces += v.qty;
      }
      const fee = (typeEl.value === "ØªÙˆØµÙŠÙ„") ? DELIVERY_FEE : 0;
      const final = sub + fee;
      return { sub, fee, final, pieces };
    }

    function updateQty(k, price, delta, meta={}){
      const cur = cart.get(k)?.qty || 0;
      const next = Math.max(0, cur + delta);
      if(next === 0) cart.delete(k);
      else cart.set(k, { qty: next, price, meta });
      renderTotalsOnly();
    }

    function renderTotalsOnly(){
      const { sub, fee, final, pieces } = totals();
      cartTotalEl.textContent = `${final} Ø±.Ø³`;
      cartCountEl.textContent = `${pieces} Ù‚Ø·Ø¹Ø©`;
      subEl.textContent = `${sub} Ø±.Ø³`;
      feeEl.textContent = `${fee} Ø±.Ø³`;
      finalEl.textContent = `${final} Ø±.Ø³`;
    }

    /* ===========================
      Ø´Ø±ÙŠØ· Ø§Ù„Ø£Ù‚Ø³Ø§Ù…
    ============================ */
    function renderCats(){
      catsBar.innerHTML = "";
      MENU.forEach((sec, idx) => {
        const id = "sec-" + slug(sec.section) + "-" + idx;
        const b = document.createElement("button");
        b.className = "catBtn";
        b.textContent = sec.section;
        b.onclick = () => document.getElementById(id)?.scrollIntoView({behavior:"smooth", block:"start"});
        catsBar.appendChild(b);
      });
      setActiveCat(0);
    }

    function setActiveCat(index){
      const btns = [...catsBar.querySelectorAll(".catBtn")];
      btns.forEach((b,i)=> b.classList.toggle("active", i===index));
    }

    /* ===========================
      Ù†Ø§ÙØ°Ø© Ø§Ù„Ø§Ø®ØªÙŠØ§Ø± (Ø­Ø¬Ù…/Ù†ÙˆØ¹)
    ============================ */
    let pendingPick = null; // {section, name, mapChoices, kind}

    function openPick({section, name, choicesMap, kind, note}){
      pendingPick = { section, name, choicesMap, kind };
      pickTitle.textContent = kind === "size" ? `Ø§Ø®ØªØ± Ø­Ø¬Ù…: ${name}` : `Ø§Ø®ØªØ± Ø§Ù„Ù†ÙˆØ¹: ${name}`;
      pickNote.textContent = note || "Ø§Ø®ØªØ± Ø§Ù„Ø®ÙŠØ§Ø± Ù„ÙŠØ¸Ù‡Ø± Ø§Ù„Ø³Ø¹Ø± âœ…";
      pickBtns.innerHTML = "";

      Object.entries(choicesMap).forEach(([label, price]) => {
        const b = document.createElement("button");
        b.className = "pickBtn";
        b.innerHTML = `${label} â€” <strong>${price} Ø±.Ø³</strong>`;
        b.onclick = () => {
          const k = choiceKey(section, name, label);
          const cur = cart.get(k)?.qty || 0;
          cart.set(k, { qty: cur + 1, price, meta: { choice: label, kind }});
          closePickModal();
          render(); // Ù„Ø¥Ø¸Ù‡Ø§Ø± ØªØ­Ø¯ÙŠØ«Ø§Øª ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù‚Ø³Ù…
        };
        pickBtns.appendChild(b);
      });

      pickBack.style.display = "flex";
      pickBack.setAttribute("aria-hidden","false");
    }

    function closePickModal(){
      pickBack.style.display = "none";
      pickBack.setAttribute("aria-hidden","true");
      pendingPick = null;
    }

    closePick.onclick = closePickModal;
    pickBack.addEventListener("click", (e)=>{ if(e.target === pickBack) closePickModal(); });

    /* ===========================
      Ø±Ù†Ø¯Ø± Ø§Ù„Ù…Ù†ÙŠÙˆ
    ============================ */
    function render(){
      menuRoot.innerHTML = "";

      MENU.forEach((sec, idx) => {
        const id = "sec-" + slug(sec.section) + "-" + idx;

        const card = document.createElement("section");
        card.className = "sectionCard";
        card.id = id;

        const head = document.createElement("div");
        head.className = "sectionHead";

        const isPizzaSection = sec.section.includes("Ø§Ù„Ø¨ÙŠØªØ²Ø§");
        head.innerHTML = `
          <h2>${sec.section}</h2>
          <span class="chip">${isPizzaSection ? "âš ï¸ Ù„Ø§Ø²Ù… ØªØ®ØªØ§Ø± Ø§Ù„Ø­Ø¬Ù… Ø¹Ø´Ø§Ù† ÙŠØ·Ù„Ø¹ Ø§Ù„Ø³Ø¹Ø±" : "Ø§Ø®ØªØ± + / -"}</span>
        `;
        card.appendChild(head);

        const items = document.createElement("div");
        items.className = "items";

        sec.items.forEach(item => {
          const isSized = !!item.sizes;
          const hasVariants = !!item.variants;

          const row = document.createElement("div");
          row.className = "item";

          const avatar = document.createElement("div");
          avatar.className = "avatar";
          const img = document.createElement("img");
          img.alt = item.name;
          img.loading = "lazy";
          img.src = item.img || "";
          img.onerror = () => { img.style.display = "none"; };
          avatar.appendChild(img);

          const info = document.createElement("div");
          info.className = "info";

          const nameRow = document.createElement("div");
          nameRow.className = "nameRow";

          const left = document.createElement("div");
          left.style.minWidth = "0";
          left.innerHTML = `
            <div class="name">${item.name}</div>
            <div class="sub">${
              isSized ? "âš ï¸ Ø§Ø®ØªØ± Ø§Ù„Ø­Ø¬Ù… Ù„ÙŠØ¸Ù‡Ø± Ø§Ù„Ø³Ø¹Ø±" :
              hasVariants ? "âš ï¸ Ø§Ø®ØªØ± Ø§Ù„Ù†ÙˆØ¹ Ù„ÙŠØ¸Ù‡Ø± Ø§Ù„Ø³Ø¹Ø±" :
              "Ø·Ø§Ø²Ø¬ ÙŠÙˆÙ…ÙŠÙ‹Ø§ â€¢ Ù†ÙŠØ´Ø§"
            }</div>
          `;

          const price = document.createElement("div");
          price.className = "price";

          if(isSized){
            const min = Math.min(...Object.values(item.sizes));
            price.textContent = `Ù…Ù† ${min} Ø±.Ø³`;
          } else if(hasVariants){
            const min = Math.min(...Object.values(item.variants));
            price.textContent = `Ù…Ù† ${min} Ø±.Ø³`;
          } else {
            price.textContent = `${item.price} Ø±.Ø³`;
          }

          nameRow.append(left, price);

          const qtyRow = document.createElement("div");
          qtyRow.className = "qtyRow";

          const minus = document.createElement("button");
          minus.className = "qbtn";
          minus.textContent = "âˆ’";

          const q = document.createElement("div");
          q.className = "qty";
          q.textContent = (isSized || hasVariants) ? "â€”" : (cart.get(baseKey(sec.section, item.name))?.qty || 0);

          const plus = document.createElement("button");
          plus.className = "qbtn";
          plus.textContent = "+";

          plus.onclick = () => {
            if(isSized){
              openPick({
                section: sec.section,
                name: item.name,
                choicesMap: item.sizes,
                kind: "size",
                note: "Ù„Ø§Ø²Ù… ØªØ®ØªØ§Ø± Ø§Ù„Ø­Ø¬Ù… Ø¹Ø´Ø§Ù† ÙŠØ·Ù„Ø¹ Ø§Ù„Ø³Ø¹Ø± âœ…"
              });
              return;
            }
            if(hasVariants){
              openPick({
                section: sec.section,
                name: item.name,
                choicesMap: item.variants,
                kind: "variant",
                note: "Ù„Ø§Ø²Ù… ØªØ®ØªØ§Ø± Ø§Ù„Ù†ÙˆØ¹ Ø¹Ø´Ø§Ù† ÙŠØ·Ù„Ø¹ Ø§Ù„Ø³Ø¹Ø± âœ…"
              });
              return;
            }
            const k = baseKey(sec.section, item.name);
            updateQty(k, item.price, +1, {});
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ù…Ø¹Ø±ÙˆØ¶
            q.textContent = cart.get(k)?.qty || 0;
          };

          minus.onclick = () => {
            if(isSized || hasVariants){
              // ÙŠÙ†Ù‚Øµ Ø¢Ø®Ø± Ø®ÙŠØ§Ø±/Ù…Ù‚Ø§Ø³ ØªÙ…Øª Ø¥Ø¶Ø§ÙØªÙ‡ Ù„Ù‡Ø°Ø§ Ø§Ù„ØµÙ†Ù
              const prefix = `${sec.section}|${item.name}|`;
              const keys = [...cart.keys()].filter(x => x.startsWith(prefix));
              if(keys.length){
                const last = keys[keys.length - 1];
                const cur = cart.get(last)?.qty || 0;
                if(cur <= 1) cart.delete(last);
                else cart.set(last, { ...cart.get(last), qty: cur - 1 });
                render();
              }
              return;
            }
            const k = baseKey(sec.section, item.name);
            updateQty(k, item.price, -1, {});
            q.textContent = cart.get(k)?.qty || 0;
          };

          qtyRow.append(minus, q, plus);
          info.append(nameRow, qtyRow);

          row.append(avatar, info);
          items.appendChild(row);
        });

        card.appendChild(items);
        menuRoot.appendChild(card);
      });

      renderTotalsOnly();
      hookSectionObserver();
    }

    /* ===========================
      ØªÙØ¹ÙŠÙ„ Ø²Ø± Ø§Ù„Ù‚Ø³Ù… Ø­Ø³Ø¨ Ù…ÙƒØ§Ù† Ø§Ù„ØªØµÙØ­
    ============================ */
    let obs = null;
    function hookSectionObserver(){
      if(obs) obs.disconnect();
      const sections = [...document.querySelectorAll(".sectionCard")];
      if(!sections.length) return;

      obs = new IntersectionObserver((entries) => {
        // Ø§Ø®ØªØ± Ø§Ù„Ø£ÙƒØ«Ø± Ø¸Ù‡ÙˆØ±Ø§Ù‹
        const visible = entries
          .filter(e => e.isIntersecting)
          .sort((a,b)=> b.intersectionRatio - a.intersectionRatio)[0];
        if(!visible) return;

        const idx = sections.findIndex(s => s.id === visible.target.id);
        if(idx >= 0) setActiveCat(idx);
      }, { threshold: [0.25, 0.4, 0.6] });

      sections.forEach(s => obs.observe(s));
    }

    /* ===========================
      Ø§Ù„Ø¥ØªÙ…Ø§Ù… + ÙˆØ§ØªØ³Ø§Ø¨
    ============================ */
    function openCheckoutModal(){
      if(cart.size === 0){
        alert("Ø§Ø®ØªØ± Ø£ØµÙ†Ø§Ù Ø£ÙˆÙ„Ø§Ù‹ Ù‚Ø¨Ù„ Ø§Ù„Ø¥ØªÙ…Ø§Ù….");
        return;
      }
      checkoutBack.style.display = "flex";
      checkoutBack.setAttribute("aria-hidden","false");
      renderTotalsOnly();
    }
    function closeCheckoutModal(){
      checkoutBack.style.display = "none";
      checkoutBack.setAttribute("aria-hidden","true");
    }

    openCheckout.onclick = openCheckoutModal;
    openCheckoutTop.onclick = openCheckoutModal;
    closeCheckout.onclick = closeCheckoutModal;

    checkoutBack.addEventListener("click", (e)=>{ if(e.target === checkoutBack) closeCheckoutModal(); });

    typeEl.addEventListener("change", () => {
      addrRow.style.display = (typeEl.value === "ØªÙˆØµÙŠÙ„") ? "grid" : "none";
      renderTotalsOnly();
    });

    function onlyDigits(s){ return (s || "").replace(/\D/g, ""); }

    function validateCheckout(){
      const name = nameEl.value.trim();
      const phoneDigits = onlyDigits(phoneEl.value.trim());

      if(!name){ alert("Ø§ÙƒØªØ¨ Ø§Ù„Ø§Ø³Ù… Ø£ÙˆÙ„Ø§Ù‹."); return false; }
      if(phoneDigits.length < 9){ alert("Ø§ÙƒØªØ¨ Ø±Ù‚Ù… Ø¬ÙˆØ§Ù„ ØµØ­ÙŠØ­."); return false; }

      const looksOK = phoneDigits.startsWith("966") || phoneDigits.startsWith("05") || phoneDigits.startsWith("5");
      if(!looksOK){ alert("Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„ ØºÙŠØ± ÙˆØ§Ø¶Ø­. Ø§ÙƒØªØ¨ 05xxxxxxxx Ø£Ùˆ 5xxxxxxxx."); return false; }

      if(typeEl.value === "ØªÙˆØµÙŠÙ„"){
        const addr = (addrEl.value || "").trim();
        if(!addr){ alert("Ù„Ù„ØªÙˆØµÙŠÙ„: Ø§ÙƒØªØ¨ Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø£Ùˆ Ø±Ø§Ø¨Ø· Ø§Ù„Ù„ÙˆÙƒÙŠØ´Ù†."); return false; }
      }
      return true;
    }

    function buildMessage(){
      const { sub, fee, final } = totals();
      const name = nameEl.value.trim() || "ØºÙŠØ± Ù…Ø°ÙƒÙˆØ±";
      const phone = phoneEl.value.trim() || "ØºÙŠØ± Ù…Ø°ÙƒÙˆØ±";
      const type = typeEl.value;
      const pay = payEl.value;
      const addr = (addrEl?.value || "").trim();
      const notes = notesEl.value.trim();

      const lines = [];
      for(const [k, v] of cart.entries()){
        const parts = k.split("|");
        const section = parts[0];
        const itemName = parts[1];
        const choice = parts[2]; // size Ø£Ùˆ variant
        const shown = choice ? `${itemName} (${choice})` : itemName;
        lines.push(`- ${shown} Ã—${v.qty} = ${v.qty * v.price} Ø±.Ø³`);
      }

      let msg =
`Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯ - Ù†ÙŠØ´Ø§
--------------------
Ø§Ù„Ø§Ø³Ù…: ${name}
Ø§Ù„Ø¬ÙˆØ§Ù„: ${phone}
Ù†ÙˆØ¹ Ø§Ù„Ø·Ù„Ø¨: ${type}
Ø§Ù„Ø¯ÙØ¹: ${pay}`;

      if(type === "ØªÙˆØµÙŠÙ„"){
        msg += `\nØ±Ø³ÙˆÙ… Ø§Ù„ØªÙˆØµÙŠÙ„: ${fee} Ø±.Ø³`;
        msg += `\nØ§Ù„Ø¹Ù†ÙˆØ§Ù†/Ø§Ù„Ù„ÙˆÙƒÙŠØ´Ù†: ${addr || "ØºÙŠØ± Ù…Ø°ÙƒÙˆØ±"}`;
      }

      msg += `
--------------------
Ø§Ù„Ø·Ù„Ø¨:
${lines.join("\n")}
--------------------
Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„Ø£ØµÙ†Ø§Ù: ${sub} Ø±.Ø³
Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ: ${final} Ø±.Ø³`;

      if(notes) msg += `\nÙ…Ù„Ø§Ø­Ø¸Ø§Øª: ${notes}`;
      return msg;
    }

    sendWA.addEventListener("click", () => {
      if(cart.size === 0){ alert("Ø§Ù„Ø³Ù„Ø© ÙØ§Ø¶ÙŠØ©."); return; }
      if(!validateCheckout()) return;
      const msg = encodeURIComponent(buildMessage());
      window.open(`https://wa.me/${WHATSAPP_NUMBER}?text=${msg}`, "_blank", "noopener");
    });

    /* ===========================
      â„ï¸ Ø«Ù„Ø¬ Ù…Ø³ØªÙ…Ø± ÙˆÙƒØ«ÙŠÙ (Ù…Ø§ ÙŠÙˆÙ‚Ù)
    ============================ */
    const snowRoot = document.getElementById("snow");

    function spawnFlake(){
      const f = document.createElement("div");
      f.className = "snowflake";

      const left = Math.random() * 100;          // vw
      const size = 2 + Math.random() * 5;        // px
      const duration = 4 + Math.random() * 6;    // seconds
      const drift = (-30 + Math.random() * 60) + "px"; // ÙŠÙ…ÙŠÙ†/ÙŠØ³Ø§Ø± Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø³Ù‚ÙˆØ·
      const opacity = 0.35 + Math.random() * 0.65;

      f.style.left = left + "vw";
      f.style.width = size + "px";
      f.style.height = size + "px";
      f.style.opacity = opacity.toFixed(2);
      f.style.setProperty("--drift", drift);
      f.style.animationDuration = duration + "s";

      snowRoot.appendChild(f);

      // ØªÙ†Ø¸ÙŠÙ Ø¨Ø¹Ø¯ Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ø­Ø±ÙƒØ©
      setTimeout(() => f.remove(), (duration * 1000) + 200);
    }

    // ÙƒØ«Ø§ÙØ© Ø§Ù„Ø«Ù„Ø¬: ÙƒÙ„ 90ms ØªÙ‚Ø±ÙŠØ¨Ø§Ù‹ (ÙƒØ«ÙŠÙ)
    setInterval(spawnFlake, 90);

    // Ø¯ÙØ¹Ø© Ø£ÙˆÙ„Ù‰
    for(let i=0;i<60;i++) setTimeout(spawnFlake, i*20);

    /* ===========================
      ØªØ´ØºÙŠÙ„ Ø£ÙˆÙ„ÙŠ
    ============================ */
    renderOffers();
    renderCats();
    render();
  </script>
</body>
</html>
